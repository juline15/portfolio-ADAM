<header
    class="fixed top-0 left-0 right-0 z-50 flex justify-between items-center px-6 md:px-8 py-2 border-b border-white/20 bg-black/40 backdrop-blur-md"
    style="box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);"
>
    <div class="flex items-center h-16">
        <a href="/">
            <img
                src="/img/logo_blanc.png"
                alt="Logo SAE303"
                class="h-20 w-auto hover:opacity-80 transition"
            />
        </a>
    </div>

    <nav class="hidden md:flex gap-8 items-center">
        <a href="/#projets" class="text-white hover:text-purple-300 transition">
            Mes projets
        </a>
        <a href="/a-propos" class="text-white hover:text-purple-300 transition">
            À propos
        </a>
        <a href="/contact" class="text-white hover:text-purple-300 transition">
            Me contacter
        </a>
    </nav>

    <button
        id="menu-toggle"
        class="md:hidden inline-flex items-center justify-center p-2 rounded-lg text-white hover:bg-white/10 transition"
        aria-label="Menu"
        aria-expanded="false"
    >
        <svg
            id="icon-burger"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg
            id="icon-close"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 hidden"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </button>
</header>

<nav
    id="mobile-menu"
    class="md:hidden fixed top-16 left-0 right-0 z-40 bg-black/90 backdrop-blur-md border-b border-white/20 hidden"
>
    <div class="px-6 py-4 flex flex-col gap-4">
        <a
            href="/#projets"
            class="text-white hover:text-purple-300 transition block py-2"
        >
            Mes projets
        </a>
        <a
            href="/a-propos"
            class="text-white hover:text-purple-300 transition block py-2"
        >
            À propos
        </a>
        <a
            href="/contact"
            class="text-white hover:text-purple-300 transition block py-2"
        >
            Me contacter
        </a>
    </div>
</nav>

<script is:inline>
    const menuToggle = document.getElementById("menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const iconBurger = document.getElementById("icon-burger");
    const iconClose = document.getElementById("icon-close");

    menuToggle?.addEventListener("click", () => {
        const isOpen = !mobileMenu.classList.contains("hidden");

        mobileMenu.classList.toggle("hidden");
        iconBurger.classList.toggle("hidden");
        iconClose.classList.toggle("hidden");
        menuToggle.setAttribute("aria-expanded", String(!isOpen));

        document.body.classList.toggle("overflow-hidden", !isOpen);
    });

    mobileMenu?.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => {
            if (!mobileMenu.classList.contains("hidden")) {
                mobileMenu.classList.add("hidden");
                iconBurger.classList.remove("hidden");
                iconClose.classList.add("hidden");
                menuToggle.setAttribute("aria-expanded", "false");
                document.body.classList.remove("overflow-hidden");
            }
        });
    });

    window.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !mobileMenu.classList.contains("hidden")) {
            mobileMenu.classList.add("hidden");
            iconBurger.classList.remove("hidden");
            iconClose.classList.add("hidden");
            menuToggle.setAttribute("aria-expanded", "false");
            document.body.classList.remove("overflow-hidden");
        }
    });
</script>
